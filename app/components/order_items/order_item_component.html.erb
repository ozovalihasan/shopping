<div id="<%= dom_id @order_item %>" class="w-full p-4 border-solid border-b">
  <div class="flex w-full items-center">

    <%= image_tag @order_item.product.images.first.variant(resize_to_limit: [100, 100]), class: "rounded-md h-32 aspect-square" %>

    <%= link_to @order_item.product, class: "w-full m-4 flex-grow-1" do %>
      <div class="whitespace-nowrap">
        <%= @order_item.product.name %>
      </div>

      <div class="text-first-500 w-full">
        <%= @order_item.price * @order_item.quantity %>
      </div>
    <% end %>
    
    <%= form_with(
      model: @order_item,
      method: :put,
      class: "flex flex-col items-center w-32",
      data: {
        turbo_frame: "main-parts",
        controller: "order-item-quantity",
        "order-item-quantity-max-value": @order_item.product.quantity
      }
    ) do |form| %>
      
      <button 
        data-action="click->order-item-quantity#increase"
        class="btn-second w-10 aspect-square"
        data-order-item-quantity-target= "increaseButton"
      > + </button>
      
      <%= form.number_field :quantity,
        class:"mx-8 text-center bg-transparent outline-none appearance-none appearance-textfield w-full",
        in: 1..@order_item.product.quantity,
        step: 1,
        data: {
          action: "input->order-item-quantity#submitForm",
          "order-item-quantity-target": "input"
        }
      %>
      
      <button 
        data-action="click->order-item-quantity#decrease"
        class="btn-second w-10 aspect-square"
        data-order-item-quantity-target= "decreaseButton"
      > - </button>
      
    <% end %>
    
    
  </div>
  

</div>
